{
	"id": "62aad99a98497201a5001134",
	"title": "Polus_inControl_onChange",
	"hookType": "onChange",
	"function": "function onChange(props) {\n    const { item, user } = props;\n    const response = Object.assign(Object.create(Object.getPrototypeOf(item)), item);\n    const { inspectionRequest, formInstance } = response;\n    let date = \"\"\n    let time = \"\"\n  \n  \n  if (Object.keys(response.data).length != 0){\n  if (response.data.responsible && response.data.responsible.user && response.data.responsible.user.length != 0 && response.data.info.dateTime != 0 && response.data.info.mtp && response.data.info.mtp != \"\" && response.data.info.count && response.data.info.organization && response.data.info.organization != \"\" && response.data.info.supDocs && response.data.info.supDocs.length != 0 && response.data.info.area && response.data.info.area.length != 0 && response.data.engineer && response.data.engineer.user && response.data.engineer.user.length != 0){\n          \n      }\n      else {\n          delete response.data.responsible.selectOne\n          response.data.responsible.selectOne = \"notReady\"\n      }\n  \n  if(response.data.engineer && !response.data.engineer.user){\n    delete response.data.engineer.selectOne\n  }\n  \n  if (response.data.info.count < 0){\n    response.data.info.count = 0\n  }  \n    \n  if (response.data.info.mtp){\n    response.data.info.units = [response.data.info.mtp[0].units_id]\n  }\n  else{\n    delete response.data.info.units  \n  }\n    \n    \n  if(response.data.supervision && !response.data.supervision.user){\n    delete response.data.supervision.selectOne\n  }\n    \n  if(response.data.subcontractor && !response.data.subcontractor.user){\n    delete response.data.subcontractor.selectOne\n  }\n    \n  if (response.data.inControlStatus && response.data.result && (response.data.inControlStatus === \"accepted\" && response.data.crCheck === \"1\" && response.data.result.selectOne || response.data.crCheck === \"2\" && (response.data.result.selectOne) && response.data.result.selectOne === \"rejected\" || response.data.crCheck === \"3\" && (response.data.result.selectOne) && response.data.result.selectOne === \"accept\")){\n       date = new Date().toLocaleDateString(\"ru-Ru\",{day: 'numeric', month: 'long', year: 'numeric'})\n       time = new Date().toLocaleTimeString(\"ru-Ru\",{hour:\"numeric\",minute: 'numeric'})\n       response.data.nowTime = \"Дата проведения \" + date + \" в \" + time\n      }\n\n   if (!response.data.checklistView && response.data.checklistObject) {\n//debugger;\n        delete response.data.checklistObject;\n    }\n\n  }\n  return response;\n}",
	"form": "62a1f67e98497201a5000f1c",
	"relationsData": [],
	"createdDate": 1655363994057,
	"updatedDate": 1661160115683,
	"owner": null,
	"assignedTo": null,
	"parent": null
}